<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    
    <style>
        div.tablasx{
            display: inline-block
        }
        
        div.padre{
            display: flex;
            justify-content: center;
            align-items: center;
            padding-top: 150px;
            padding-left: 200px;
            padding-right: 200px;
        }
        
        html,body{
            background-image: url("#{resource['images:200.gif']}");
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
        }
    </style>
    
    <h:head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"/>    
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" />
        <h:outputStylesheet library="css" name="bootstrap.min.css"/>
        <h:outputScript library="js" name="bootstrap.min.js"/>
        <h:outputScript library="js" name="popper.min.js"/>
        <title>Crear nuevo Usuario</title>
    </h:head>
    <h:body>
        <div class="padre">
            <div class="tablasx">
                <center>
                    <p:panel header="Formulario de Administradores">
                        <f:view>
                            <h:form id="frmAdmin" enctype="multipart/form-data">
                                <h:inputHidden value="#{adminBean.accion}"/>

                                <p:panelGrid columns="3">

                                    <p:outputLabel id="lblClave" for="txtIdAdmin" value="Clave" rendered="#{adminBean.modoActualizar}"/>        
                                    <p:inputText id="txtIdAdmin" 
                                                 value="#{adminBean.dto.administrador.idAdministrador}" 
                                                 readonly="true" 
                                                 rendered="#{adminBean.modoActualizar}"/>
                                    <p:message for="txtIdAdmin" display="icon"
                                                   class="ui-messages-{severity}-icon"/>

                                    <p:outputLabel id="lblNombre" for="txtNombre" value="Nombre"/>
                                    <p:inputText id="txtNombre" 
                                                 value="#{adminBean.dto.administrador.adminNombre}" 
                                                 required="true" 
                                                 requiredMessage="Este campo es obligatorio" 
                                                 maxlength="50"/>
                                    <p:message for="txtNombre" display="icon"
                                                   class="ui-messages-{severity}-icon"/>

                                    <p:outputLabel id="lblPaterno" for="txtPaterno" value="Apellido Paterno"/>
                                    <p:inputText id="txtPaterno" 
                                                 value="#{adminBean.dto.administrador.adminPaterno}" 
                                                 required="true" 
                                                 requiredMessage="Este campo es obligatorio" 
                                                 maxlength="50"/>
                                    <p:message for="txtPaterno" display="icon"
                                                   class="ui-messages-{severity}-icon"/>

                                    <p:outputLabel id="lblMaterno" for="txtMaterno" value="Apellido Materno"/>
                                    <p:inputText id="txtMaterno" 
                                                 value="#{adminBean.dto.administrador.adminMaterno}" 
                                                 required="true" 
                                                 requiredMessage="Este campo es obligatorio" 
                                                 type="text"
                                                 
                                                 maxlength="50"/>
                                    <p:message for="txtMaterno" display="icon"
                                                   class="ui-messages-{severity}-icon"/>

                                    <p:outputLabel id="lblEmail" for="txtCorreo" value="Correo"/>
                                    <p:inputText id="txtCorreo"
                                                 value="#{adminBean.dto.administrador.adminCorreo}" 
                                                 required="true" 
                                                 type="email"
                                                 requiredMessage="Este campo es obligatorio" 
                                                 maxlength="50"/>
                                    <p:message for="txtCorreo" display="icon"
                                                   class="ui-messages-{severity}-icon"/>

                                    <p:outputLabel id="lblUsuario" for="txtUsuario" value="Nombre de Usuario"/>
                                    <p:inputText id="txtUsuario" 
                                                 value="#{adminBean.dto.administrador.adminUsuario}" 
                                                 required="true" 
                                                 requiredMessage="Este campo es obligatorio" 
                                                 maxlength="50"/>
                                    <p:message for="txtUsuario" display="icon"
                                                   class="ui-messages-{severity}-icon"/>

                                    <p:outputLabel id="lblContrasena" for="txtContra" value="ContraseÃ±a"/>
                                    <p:inputText id="txtContra" 
                                                 value="#{adminBean.dto.administrador.adminContrasena}" 
                                                 required="true" 
                                                 requiredMessage="Este campo es obligatorio" 
                                                 maxlength="50"/>
                                    <p:message for="txtContra" display="icon"
                                                   class="ui-messages-{severity}-icon"/>

                                    <p:outputLabel value="Foto:"/>
                                    <p:fileUpload id="txtFoto" immediate="true" value="#{adminBean.foto}" mode="simple" skinSimple="true"/>
                                    <p:message for="txtFoto" display="icon"
                                                   class="ui-messages-{severity}-icon"/>
                                    
                                    <h:outputText value="Estado:"/>
                                    <h:selectOneMenu id="txtEstado" value="#{adminBean.idEstado}">      
                                        <f:selectItem itemLabel="Seleccionar Estado" itemValue=""/>
                                        <f:selectItems value="#{adminBean.listaEstados()}" var="estado"
                                                       itemValue="#{estado.idEstado}" itemLabel="#{estado.descripcion}" />
                                        <f:ajax execute="txtEstado" event="change" render="txtMunicipio"/> 
                                    </h:selectOneMenu>
                                    <p:message for="txtEstado" display="icon"
                                                   class="ui-messages-{severity}-icon"/>

                                    <h:outputText id="lblMunicipio" value="Municipio:" />
                                    <h:selectOneMenu id="txtMunicipio" value="#{adminBean.dto.administrador.idMunicipio}">
                                        <f:selectItem itemLabel="Seleccionar Municipio" itemValue=""/>
                                        <f:selectItems value="#{adminBean.listaMunicipios()}" var="municipio"
                                                       itemValue="#{municipio.idMunicipio}" itemLabel="#{municipio.descripcion}"/>
                                    </h:selectOneMenu>
                                    <p:message for="txtMunicipio" display="icon"
                                                   class="ui-messages-{severity}-icon"/>

                                </p:panelGrid>
                                <p:panel id="pnlBotones">
                                    <p:commandButton id="btnAceptar" value="Aceptar" action="#{adminBean.crear()}" rendered="#{adminBean.modoCrear}" update="@form" ajax="false"/>
                                    <p:commandButton id="btnActualizar" value="Actualizar" action="#{adminBean.actualizar()}" rendered="#{adminBean.modoActualizar}" update="@form" ajax="false"/>
                                    <p:commandButton id="btnCancelar" value="Cancelar" action="#{adminBean.back()}" immediate="true"/>
                                </p:panel>
                            </h:form>
                        </f:view>
                    </p:panel>
                </center>
            </div>
        </div>
    </h:body>
</html>

